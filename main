import telebot
from telebot import types

# –£–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
bot = telebot.TeleBot('')
proposals = []
temp_prop = {}
CHANNEL_CHAT_ID = ''
admin_chat_ID = []
admin_KEY = ''

markup2 = types.ReplyKeyboardMarkup(resize_keyboard=True)
item2 = types.KeyboardButton("üëç")
item3 = types.KeyboardButton("üëé")
markup2.add(item2, item3)

markup1 = types.ReplyKeyboardMarkup(resize_keyboard=True)
item1 = types.KeyboardButton("–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å")
markup1.add(item1)


@bot.message_handler(func=lambda message: True)
def handle_all_messages(message):
    if message.chat.id not in admin_chat_ID:
        if message.text == admin_KEY:
            admin_chat_ID.append(message.chat.id)
        else:
            proposals.append(message.text)
            bot.send_message(message.chat.id, '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Ä–∞—Å—Å–º–æ—Ç—Ä—è—Ç –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ')
            for admin in admin_chat_ID:
                bot.send_message(admin, "–ù–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ", reply_markup=markup1)
    elif len(proposals) == 0:
        bot.send_message(message.chat.id, '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –±–æ–ª—å—à–µ –Ω–µ—Ç')
    else:
        if message.text in ['–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å', "üëç", "üëé"]:
            bot.send_message(message.chat.id, proposals[0])
            temp_prop[message.chat.id] = proposals[0]
            bot.send_message(message.chat.id, '–ü—É–±–ª–∏–∫—É–µ–º?', reply_markup=markup2)
        if message.text == "üëç":
            if temp_prop[message.chat.id] != '':
                bot.send_message(CHANNEL_CHAT_ID, temp_prop[message.chat.id])
                proposals.pop(proposals.index(temp_prop[message.chat.id]))
        if message.text == "üëé":
            proposals.pop(proposals.index(temp_prop[message.chat.id]))


bot.polling()
